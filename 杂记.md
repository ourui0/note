# æ‚è®°

## å•è°ƒæ ˆ

**å•è°ƒæ ˆ**æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ ˆï¼Œé‡Œé¢çš„å†…å®¹å•è°ƒï¼Œå®šä¹‰éå¸¸ç®€å•ï¼Œå’Œå®ƒçš„åå­—ç›¸åŒï¼Œä½†æ˜¯ä»–èƒ½ç”¨æ¥è§£å†³å¯»æ‰¾**ä¸‹ä¸€ä¸ªæ›´å¤§ï¼ˆæ›´å°ï¼‰**çš„å…ƒç´ 

è¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ

æ¥ä¸‹æ¥ç”¨ä¸€ä¸ªç»å…¸ä¾‹å­æ¥è§£é‡Š

ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œæ‰¾åˆ°å³è¾¹ç¬¬ä¸€ä¸ªæ¯”å®ƒå¤§çš„æ•°

**è¾“å…¥**[2,1,2,4,3]

**è¾“å‡º**[4,2,4,-1,-1]

ç°åœ¨æˆ‘ä»¬æ¥æ¨¡æ‹Ÿè§£é¢˜è¿‡ç¨‹

1.åˆå§‹åŒ–ä¸€ä¸ªç©ºæ ˆï¼Œ

2.éå†æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ 

3.å¯¹äºå½“å‰å…ƒç´ arr[i]:

+ **while** (æ ˆä¸ä¸ºç©º **å¹¶ä¸”** å½“å‰å…ƒç´  `nums[i]` > æ ˆé¡¶å…ƒç´ )ï¼š
  - **å¼¹å‡º**æ ˆé¡¶å…ƒç´ ã€‚è¿™æ„å‘³ç€ï¼š**å½“å‰å…ƒç´  `nums[i]` å°±æ˜¯è¢«å¼¹å‡ºå…ƒç´ çš„â€œä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ â€**ã€‚
  - æˆ‘ä»¬å°†è¿™ä¸ªå¯¹åº”å…³ç³»ï¼ˆè¢«å¼¹å‡ºå…ƒç´  -> `nums[i]`) è®°å½•ä¸‹æ¥ã€‚
+ **å°†**å½“å‰å…ƒç´  `nums[i]` çš„**ç´¢å¼•**ï¼ˆæˆ–å€¼ï¼‰å‹å…¥æ ˆä¸­ã€‚
+ ï¼ˆè¿™æ ·å°±èƒ½ä¿è¯æ ˆå†…å…ƒç´ ä»åº•åˆ°é¡¶å§‹ç»ˆæ˜¯**å•è°ƒé€’å‡**çš„ï¼‰ 

4.éå†ç»“æŸåï¼Œå¦‚æœæ ˆä¸­è¿˜æœ‰å…ƒç´ ï¼Œè¯´æ˜è¿™äº›å…ƒç´ å³è¾¹æ²¡æœ‰æ¯”å®ƒä»¬æ›´å¤§çš„å…ƒç´ ï¼Œå®ƒä»¬çš„ç»“æœè®°ä¸º -1ã€‚

**ä¸€æ­¥æ­¥æ‹†è§£ä¸Šé¢çš„æ•°ç»„ `[2, 1, 2, 4, 3]`ï¼š**

| å½“å‰å…ƒç´  | æ“ä½œ                                                         | æ ˆ (åº• -> é¡¶) | è¯´æ˜/ç»“æœè®°å½•                                               |
| :------- | :----------------------------------------------------------- | :------------ | :---------------------------------------------------------- |
| 2        | æ ˆç©ºï¼Œç›´æ¥å…¥æ ˆ                                               | [2]           |                                                             |
| 1        | 1 < æ ˆé¡¶(2)ï¼Œç›´æ¥å…¥æ ˆ                                        | [2, 1]        |                                                             |
| 2        | 2 > æ ˆé¡¶(1)ï¼Œ**å¼¹å‡º1**ï¼Œè®°å½• `1 -> 2` 2 == æ ˆé¡¶(2)ï¼Œ**å…¥æ ˆ** | [2, 2]        | 1 çš„ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ æ˜¯ 2                                      |
| 4        | 4 > æ ˆé¡¶(2)ï¼Œ**å¼¹å‡º2**ï¼Œè®°å½• `2 -> 4` 4 > æ ˆé¡¶(2)ï¼Œ**å¼¹å‡º2**ï¼Œè®°å½• `2 -> 4` æ ˆç©ºï¼Œ**å…¥æ ˆ** | [4]           | ç¬¬äºŒä¸ª 2 çš„ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ æ˜¯ 4 ç¬¬ä¸€ä¸ª 2 çš„ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ æ˜¯ 4 |
| 3        | 3 < æ ˆé¡¶(4)ï¼Œç›´æ¥å…¥æ ˆ                                        | [4, 3]        |                                                             |
| **ç»“æŸ** | æ ˆä¸­å‰©ä½™å…ƒç´  [4, 3]ï¼Œå®ƒä»¬å³è¾¹æ²¡æœ‰æ›´å¤§å…ƒç´ ï¼Œè®°å½• `4 -> -1`, `3 -> -1` |               |                                                             |

**ä»£ç ç¤ºä¾‹**ï¼š

```c++
#include <iostream>
#include <vector>
#include <stack>
using namespace std;

vector<int> nextGreaterElement(const vector<int>& nums) {
    int n = nums.size();
    vector<int> result(n, -1); // åˆå§‹åŒ–ç»“æœæ•°ç»„ï¼Œå…¨éƒ¨ä¸º-1
    stack<int> st; // å•è°ƒæ ˆï¼Œå­˜å‚¨çš„æ˜¯å…ƒç´ çš„ç´¢å¼•
    
    // éå†æ•°ç»„
    for (int i = 0; i < n; i++) {
        // å½“æ ˆä¸ä¸ºç©ºä¸”å½“å‰å…ƒç´ å¤§äºæ ˆé¡¶å…ƒç´ å¯¹åº”çš„å€¼æ—¶
        while (!st.empty() && nums[i] > nums[st.top()]) {
            // æ ˆé¡¶å…ƒç´ çš„ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ å°±æ˜¯å½“å‰å…ƒç´ 
            result[st.top()] = nums[i];
            st.pop(); // å¼¹å‡ºæ ˆé¡¶å…ƒç´ 
        }
        // å°†å½“å‰å…ƒç´ çš„ç´¢å¼•å…¥æ ˆ
        st.push(i);
    }
    
    return result;
}

int main() {
    vector<int> nums = {2, 1, 2, 4, 3};
    vector<int> result = nextGreaterElement(nums);
    
    cout << "è¾“å…¥æ•°ç»„: ";
    for (int num : nums) {
        cout << num << " ";
    }
    cout << endl;
    
    cout << "ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ : ";
    for (int res : result) {
        cout << res << " ";
    }
    cout << endl;
    
    return 0;
}
```

## ææ„å‡½æ•°

### ğŸ“š åŸºæœ¬å®šä¹‰

**ææ„å‡½æ•°** æ˜¯ä¸€ç§ç‰¹æ®Šçš„æˆå‘˜å‡½æ•°ï¼Œå®ƒåœ¨å¯¹è±¡è¢«é”€æ¯æ—¶**è‡ªåŠ¨è°ƒç”¨**ï¼Œç”¨äºæ‰§è¡Œå¯¹è±¡çš„æ¸…ç†å·¥ä½œã€‚

#### ğŸ”§ è¯­æ³•å½¢å¼

```c++
class ClassName {
public:
    ~ClassName();  // ææ„å‡½æ•°å£°æ˜
};

// ææ„å‡½æ•°å®šä¹‰
ClassName::~ClassName() {
    // æ¸…ç†ä»£ç 
}
```

---

### ğŸ¯ æ ¸å¿ƒç‰¹æ€§

#### 1. **å‘½åè§„åˆ™**
- å‡½æ•°å = `~` + ç±»å
- **æ— å‚æ•°**ï¼Œ**æ— è¿”å›å€¼**
- **ä¸èƒ½è¢«é‡è½½**ï¼ˆä¸€ä¸ªç±»åªèƒ½æœ‰ä¸€ä¸ªææ„å‡½æ•°ï¼‰

#### 2. **è°ƒç”¨æ—¶æœº**
ææ„å‡½æ•°åœ¨ä»¥ä¸‹æƒ…å†µè‡ªåŠ¨è°ƒç”¨ï¼š

| åœºæ™¯                                  | ç¤ºä¾‹                          |
| ------------------------------------- | ----------------------------- |
| å±€éƒ¨å¯¹è±¡ç¦»å¼€ä½œç”¨åŸŸ                    | `{ MyClass obj; }` â† å³æ‹¬å·å¤„ |
| åŠ¨æ€å¯¹è±¡è¢« `delete`(ä¸èƒ½æ˜¯```free```) | `delete ptr;`                 |
| å¯¹è±¡æˆå‘˜æ‰€å±å¯¹è±¡é”€æ¯                  | åŒ…å«ç±»å¯¹è±¡é”€æ¯æ—¶              |
| ä¸´æ—¶å¯¹è±¡ç”Ÿå‘½å‘¨æœŸç»“æŸ                  | è¡¨è¾¾å¼è®¡ç®—å®Œæˆå              |
| æ ˆå±•å¼€æ—¶ï¼ˆå¼‚å¸¸å¤„ç†ï¼‰                  | å¼‚å¸¸æŠ›å‡ºæ—¶                    |

---

### ğŸ’» è¯¦ç»†ä»£ç ç¤ºä¾‹

#### ç¤ºä¾‹1ï¼šåŸºç¡€ç”¨æ³•

```c++
#include <iostream>
#include <cstring>

class String {
private:
    char* m_data;
    size_t m_length;

public:
    // ğŸ—ï¸ æ„é€ å‡½æ•° - åˆ†é…èµ„æº
    String(const char* str = "") {
        std::cout << "ğŸ”§ æ„é€ å‡½æ•°è¢«è°ƒç”¨" << std::endl;
        m_length = strlen(str);
        m_data = new char[m_length + 1];  // ğŸ¯ åŠ¨æ€åˆ†é…å†…å­˜
        strcpy(m_data, str);
    }

    // ğŸ—‘ï¸ ææ„å‡½æ•° - é‡Šæ”¾èµ„æº
    ~String() {
        std::cout << "ğŸ§¹ ææ„å‡½æ•°è¢«è°ƒç”¨ï¼Œé‡Šæ”¾èµ„æº: " << (m_data ? m_data : "null") << std::endl;
        delete[] m_data;  // ğŸ¯ å…³é”®ï¼šé‡Šæ”¾åŠ¨æ€å†…å­˜
        m_data = nullptr;
    }

    // å…¶ä»–æˆå‘˜å‡½æ•°
    void print() const {
        std::cout << "å†…å®¹: " << m_data << std::endl;
    }
};

void demoBasic() {
    std::cout << "\n=== ç¤ºä¾‹1ï¼šåŸºç¡€ç”¨æ³• ===" << std::endl;
    { // å¼€å§‹ä½œç”¨åŸŸ
        String s1("Hello World");  // ğŸ—ï¸ æ„é€ å‡½æ•°è°ƒç”¨
        s1.print();
    } // ğŸ§¹ ç¦»å¼€ä½œç”¨åŸŸï¼Œææ„å‡½æ•°è‡ªåŠ¨è°ƒç”¨
    
    std::cout << "ä½œç”¨åŸŸç»“æŸ" << std::endl;
}
```

#### ç¤ºä¾‹2ï¼šåŠ¨æ€å¯¹è±¡ç®¡ç†

```c++
class ResourceManager {
private:
    int* m_buffer;
    size_t m_size;

public:
    // æ„é€ å‡½æ•°
    ResourceManager(size_t size) : m_size(size) {
        std::cout << "ğŸ”§ åˆ†é… " << size << " ä¸ªæ•´æ•°" << std::endl;
        m_buffer = new int[size];  // ğŸ¯ åŠ¨æ€åˆ†é…
    }

    // ææ„å‡½æ•°
    ~ResourceManager() {
        std::cout << "ğŸ§¹ é‡Šæ”¾ " << m_size << " ä¸ªæ•´æ•°" << std::endl;
        delete[] m_buffer;  // ğŸ¯ é˜²æ­¢å†…å­˜æ³„æ¼
        m_buffer = nullptr;
    }

    // ç¦ç”¨æ‹·è´ï¼ˆé¿å…æµ…æ‹·è´é—®é¢˜ï¼‰
    ResourceManager(const ResourceManager&) = delete;
    ResourceManager& operator=(const ResourceManager&) = delete;
};

void demoDynamic() {
    std::cout << "\n=== ç¤ºä¾‹2ï¼šåŠ¨æ€å¯¹è±¡ ===" << std::endl;
    
    ResourceManager* ptr = new ResourceManager(100);  // ğŸ—ï¸ æ„é€ å‡½æ•°
    ptr->~ResourceManager();  // âŒ å¯ä»¥æ˜¾å¼è°ƒç”¨ï¼Œä½†é€šå¸¸ä¸åº”è¯¥è¿™æ ·åš
    delete ptr;  // ğŸ§¹ è°ƒç”¨ææ„å‡½æ•° + é‡Šæ”¾å†…å­˜
    
    std::cout << "åŠ¨æ€å¯¹è±¡å·²é”€æ¯" << std::endl;
}
```

#### ç¤ºä¾‹3ï¼šRAIIæ¨¡å¼

```c++
#include <fstream>

// ğŸ¯ RAIIï¼ˆResource Acquisition Is Initializationï¼‰ç¤ºä¾‹
class FileWrapper {
private:
    std::fstream m_file;

public:
    // æ„é€ å‡½æ•°è·å–èµ„æº
    FileWrapper(const std::string& filename, std::ios::openmode mode = std::ios::in) {
        std::cout << "ğŸ”§ æ‰“å¼€æ–‡ä»¶: " << filename << std::endl;
        m_file.open(filename, mode);
        if (!m_file.is_open()) {
            throw std::runtime_error("æ— æ³•æ‰“å¼€æ–‡ä»¶");
        }
    }

    // ææ„å‡½æ•°é‡Šæ”¾èµ„æº
    ~FileWrapper() {
        std::cout << "ğŸ§¹ å…³é—­æ–‡ä»¶" << std::endl;
        if (m_file.is_open()) {
            m_file.close();  // ğŸ¯ ç¡®ä¿æ–‡ä»¶è¢«å…³é—­
        }
    }

    // ä½¿ç”¨èµ„æº
    std::string readLine() {
        std::string line;
        std::getline(m_file, line);
        return line;
    }

    // ç¦æ­¢æ‹·è´
    FileWrapper(const FileWrapper&) = delete;
    FileWrapper& operator=(const FileWrapper&) = delete;
};

void demoRAII() {
    std::cout << "\n=== ç¤ºä¾‹3ï¼šRAIIæ¨¡å¼ ===" << std::endl;
    
    try {
        FileWrapper file("example.txt");  // ğŸ—ï¸ èµ„æºè·å–
        auto content = file.readLine();   // ğŸ¯ ä½¿ç”¨èµ„æº
        std::cout << "è¯»å–å†…å®¹: " << content << std::endl;
    } // ğŸ§¹ æ— è®ºæ˜¯å¦å¼‚å¸¸ï¼Œæ–‡ä»¶éƒ½ä¼šè¢«æ­£ç¡®å…³é—­
    catch (const std::exception& e) {
        std::cout << "é”™è¯¯: " << e.what() << std::endl;
    }
}
```

---

### âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹

#### 1. **è™šææ„å‡½æ•°**

```c++
class Base {
public:
    // âœ… å¦‚æœç±»å¯èƒ½è¢«ç»§æ‰¿ï¼Œåº”è¯¥å£°æ˜è™šææ„å‡½æ•°
    virtual ~Base() {
        std::cout << "Base ææ„å‡½æ•°" << std::endl;
    }
};

class Derived : public Base {
private:
    int* m_data;
public:
    Derived() : m_data(new int[100]) {}
    
    // âœ… æ­£ç¡®ï¼šæ´¾ç”Ÿç±»ææ„å‡½æ•°è‡ªåŠ¨ä¸ºè™šå‡½æ•°
    ~Derived() override {
        std::cout << "Derived ææ„å‡½æ•°" << std::endl;
        delete[] m_data;
    }
};

void demoVirtualDestructor() {
    std::cout << "\n=== è™šææ„å‡½æ•°ç¤ºä¾‹ ===" << std::endl;
    
    Base* ptr = new Derived();
    delete ptr;  // ğŸ¯ æ­£ç¡®è°ƒç”¨ Derived å’Œ Base çš„ææ„å‡½æ•°
}
```

#### 2. **åˆæˆææ„å‡½æ•°**

å¦‚æœç±»æ²¡æœ‰å®šä¹‰ææ„å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªï¼š

```c++
class SimpleClass {
    int x, y;
public:
    // ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆï¼š~SimpleClass() {}
    // å¯¹åŸºæœ¬ç±»å‹æˆå‘˜ï¼Œåˆæˆææ„å‡½æ•°ä»€ä¹ˆä¹Ÿä¸åš
};
```

---

### ğŸ”„ ä¸å…¶ä»–è¯­è¨€çš„å¯¹æ¯”

| è¯­è¨€       | ç±»ä¼¼æœºåˆ¶                | ç‰¹ç‚¹                     |
| ---------- | ----------------------- | ------------------------ |
| **C++**    | `~ClassName()`          | ç¡®å®šæ€§é”€æ¯ï¼Œæ‰‹åŠ¨å†…å­˜ç®¡ç† |
| **Java**   | `finalize()`            | âŒ å·²åºŸå¼ƒï¼Œéç¡®å®šæ€§è°ƒç”¨   |
| **C#**     | `IDisposable` + `using` | ç¡®å®šæ€§èµ„æºç®¡ç†           |
| **Python** | `__del__()`             | éç¡®å®šæ€§ï¼Œä¾èµ–åƒåœ¾å›æ”¶   |
| **Rust**   | `Drop trait`            | ç¡®å®šæ€§ï¼Œæ‰€æœ‰æƒç³»ç»Ÿ       |

---

### ğŸ¯ æœ€ä½³å®è·µæ€»ç»“

1. **âœ… RAIIåŸåˆ™**ï¼šåœ¨æ„é€ å‡½æ•°ä¸­è·å–èµ„æºï¼Œåœ¨ææ„å‡½æ•°ä¸­é‡Šæ”¾
2. **âœ… è™šææ„å‡½æ•°**ï¼šåŸºç±»å£°æ˜è™šææ„å‡½æ•°
3. **âœ… å¼‚å¸¸å®‰å…¨**ï¼šææ„å‡½æ•°ä¸åº”è¯¥æŠ›å‡ºå¼‚å¸¸
4. **âŒ é¿å…æ‰‹åŠ¨è°ƒç”¨**ï¼šé™¤éåœ¨placement newç­‰ç‰¹æ®Šåœºæ™¯
5. **âœ… éµå¾ªè§„åˆ™äº”**ï¼šå¦‚æœéœ€è¦è‡ªå®šä¹‰ææ„å‡½æ•°ï¼Œé€šå¸¸ä¹Ÿéœ€è¦æ‹·è´/ç§»åŠ¨æ§åˆ¶æˆå‘˜

```c++
// ğŸ¯ ç°ä»£C++æ¨èï¼šä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆé¿å…æ‰‹åŠ¨ææ„
#include <memory>

void modernc++Style() {
    std::cout << "\n=== ç°ä»£C++é£æ ¼ ===" << std::endl;
    
    // æ— éœ€æ‰‹åŠ¨ deleteï¼Œunique_ptr è‡ªåŠ¨ç®¡ç†ç”Ÿå‘½å‘¨æœŸ
    auto ptr = std::make_unique<String>("Modern C++");
    ptr->print();
    
    std::cout << "ç¦»å¼€ä½œç”¨åŸŸï¼Œæ™ºèƒ½æŒ‡é’ˆè‡ªåŠ¨æ¸…ç†..." << std::endl;
} // ğŸ§¹ è‡ªåŠ¨è°ƒç”¨ææ„å‡½æ•°
```

---

### ğŸ“Š å¯è§†åŒ–ï¼šå¯¹è±¡ç”Ÿå‘½å‘¨æœŸ

```
å¯¹è±¡åˆ›å»º â†’ æ„é€ å‡½æ•° ğŸ—ï¸
    â†“
å¯¹è±¡ä½¿ç”¨æœŸ
    â†“
å¯¹è±¡é”€æ¯ â†’ ææ„å‡½æ•° ğŸ§¹
    â†“
èµ„æºé‡Šæ”¾ âœ…
```

**å…³é”®è¦ç‚¹**ï¼šææ„å‡½æ•°æ˜¯C++ä¸­èµ„æºç®¡ç†çš„åŸºçŸ³ï¼Œå®ƒç¡®ä¿äº†å¯¹è±¡åœ¨ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶èƒ½å¤Ÿæ­£ç¡®åœ°æ¸…ç†å…¶å ç”¨çš„èµ„æºï¼Œæ˜¯é˜²æ­¢èµ„æºæ³„æ¼çš„æ ¸å¿ƒæœºåˆ¶ã€‚

## ä¸‰åˆ†æŸ¥æ‰¾

### é—®é¢˜æè¿°
å¯»æ‰¾å‡½æ•° `f(x) = -xÂ² + 4x + 1` åœ¨åŒºé—´ `[0, 5]` ä¸Šçš„æœ€å¤§å€¼ç‚¹ã€‚

### å®Œæ•´ä»£ç å®ç°

```c++
#include <iostream>
#include <cmath>
#include <iomanip>
using namespace std;

// å®šä¹‰å•å³°å‡½æ•°ï¼šf(x) = -xÂ² + 4x + 1ï¼Œåœ¨ x=2 å¤„å–å¾—æœ€å¤§å€¼ 5
double f(double x) {
    return -x*x + 4*x + 1;
}

// ä¸‰åˆ†æŸ¥æ‰¾å®ç°
double ternary_search(double left, double right, double precision) {
    while (right - left > precision) {
        // å°†åŒºé—´åˆ†æˆä¸‰éƒ¨åˆ†
        double mid1 = left + (right - left) / 3;
        double mid2 = right - (right - left) / 3;
        
        // æ¯”è¾ƒä¸¤ä¸ªä¸­é—´ç‚¹çš„å‡½æ•°å€¼
        if (f(mid1) < f(mid2)) {
            left = mid1;    // æœ€å¤§å€¼åœ¨ [mid1, right] åŒºé—´
        } else {
            right = mid2;   // æœ€å¤§å€¼åœ¨ [left, mid2] åŒºé—´
        }
    }
    
    // è¿”å›åŒºé—´ä¸­ç‚¹ä½œä¸ºè¿‘ä¼¼æå€¼ç‚¹
    return (left + right) / 2;
}

int main() {
    double left = 0;        // æœç´¢åŒºé—´å·¦è¾¹ç•Œ
    double right = 5;       // æœç´¢åŒºé—´å³è¾¹ç•Œ  
    double precision = 1e-6; // æœç´¢ç²¾åº¦
    
    cout << "å¯»æ‰¾å‡½æ•° f(x) = -xÂ² + 4x + 1 åœ¨åŒºé—´ [0, 5] ä¸Šçš„æœ€å¤§å€¼ç‚¹" << endl;
    
    double max_point = ternary_search(left, right, precision);
    double max_value = f(max_point);
    
    cout << fixed << setprecision(6);
    cout << "æœ€å¤§å€¼ç‚¹: x = " << max_point << endl;
    cout << "æœ€å¤§å€¼: f(x) = " << max_value << endl;
    
    // éªŒè¯ç†è®ºå€¼ï¼ˆå·²çŸ¥åœ¨ x=2 å¤„å–å¾—æœ€å¤§å€¼ 5ï¼‰
    cout << "ç†è®ºå€¼: x = 2.000000, f(x) = 5.000000" << endl;
    
    return 0;
}
```

### è¿è¡Œç»“æœ
```
å¯»æ‰¾å‡½æ•° f(x) = -xÂ² + 4x + 1 åœ¨åŒºé—´ [0, 5] ä¸Šçš„æœ€å¤§å€¼ç‚¹
æœ€å¤§å€¼ç‚¹: x = 2.000000
æœ€å¤§å€¼: f(x) = 5.000000
ç†è®ºå€¼: x = 2.000000, f(x) = 5.000000
```

### ç®—æ³•è¯´æ˜
- **å‡½æ•°ç‰¹æ€§**ï¼šæŠ›ç‰©çº¿å¼€å£å‘ä¸‹ï¼Œæ˜¯å•å³°å‡½æ•°
- **ä¸‰åˆ†åŸç†**ï¼šæ¯æ¬¡å°†æœç´¢åŒºé—´åˆ†æˆä¸‰ç­‰ä»½ï¼Œæ¯”è¾ƒä¸¤ä¸ªåˆ†ç•Œç‚¹çš„å‡½æ•°å€¼
- **æ”¶æ•›æ€§**ï¼šæ¯æ¬¡è¿­ä»£å°†æœç´¢åŒºé—´ç¼©å°åˆ°åŸæ¥çš„ 2/3
- **ç²¾åº¦æ§åˆ¶**ï¼šå½“åŒºé—´é•¿åº¦å°äºæŒ‡å®šç²¾åº¦æ—¶åœæ­¢æœç´¢


## list

### åˆ›å»ºä¸åˆå§‹åŒ–

#### æ„é€ å‡½æ•°
```c++
list<int> lst1;                    // ç©ºé“¾è¡¨
list<int> lst2(5, 10);            // 5ä¸ªå…ƒç´ ï¼Œæ¯ä¸ªéƒ½æ˜¯10
list<int> lst3 = {1, 2, 3, 4, 5}; // åˆå§‹åŒ–åˆ—è¡¨
list<int> lst4(lst3);             // æ‹·è´æ„é€ 
list<int> lst5(lst3.begin(), lst3.end()); // èŒƒå›´æ„é€ 
```

#### èµ‹å€¼æ“ä½œ
```c++
lst1 = lst2;                      // æ‹·è´èµ‹å€¼
lst1 = {1, 2, 3, 4, 5};          // åˆå§‹åŒ–åˆ—è¡¨èµ‹å€¼
lst1.assign(3, 100);              // åˆ†é…3ä¸ª100
lst1.assign(lst2.begin(), lst2.end()); // èŒƒå›´èµ‹å€¼
```

### å…ƒç´ è®¿é—®

#### é¦–å°¾å…ƒç´ è®¿é—®
```c++
lst.front();      // ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆä¸æ£€æŸ¥ç©ºï¼‰
lst.back();       // æœ€åä¸€ä¸ªå…ƒç´ ï¼ˆä¸æ£€æŸ¥ç©ºï¼‰

// å®‰å…¨è®¿é—®ç¤ºä¾‹ï¼š
if (!lst.empty()) {
    int first = lst.front();
    int last = lst.back();
}
```

#### â—æ³¨æ„ï¼šlistä¸æ”¯æŒéšæœºè®¿é—®
```c++
// lst[2] = 5;                    // é”™è¯¯ï¼ä¸èƒ½ä½¿ç”¨ä¸‹æ ‡
// int val = lst.at(2);           // é”™è¯¯ï¼æ²¡æœ‰atå‡½æ•°
```

### å®¹é‡æŸ¥è¯¢

```c++
lst.empty();      // æ˜¯å¦ä¸ºç©º
lst.size();       // å…ƒç´ ä¸ªæ•°
lst.max_size();   // ç†è®ºæœ€å¤§å¤§å°
```

### ä¿®æ”¹æ“ä½œ

#### æ·»åŠ å…ƒç´ 
```c++
lst.push_back(10);     // å°¾éƒ¨æ·»åŠ 
lst.push_front(20);    // å¤´éƒ¨æ·»åŠ 
lst.emplace_back(30);  // å°¾éƒ¨æ„é€ ï¼ˆC++11ï¼‰
lst.emplace_front(40); // å¤´éƒ¨æ„é€ ï¼ˆC++11ï¼‰

// emplaceç¤ºä¾‹ï¼š
list<pair<int, string>> lst;
lst.emplace_back(1, "hello");  // ç›´æ¥æ„é€ ï¼Œé¿å…æ‹·è´
```

#### æ’å…¥å…ƒç´ 
```c++
auto it = lst.begin();
advance(it, 2);                 // ç§»åŠ¨åˆ°ç¬¬ä¸‰ä¸ªä½ç½®
lst.insert(it, 99);             // åœ¨æŒ‡å®šä½ç½®å‰æ’å…¥
lst.insert(it, 3, 88);          // æ’å…¥3ä¸ª88
lst.insert(it, {1, 2, 3});      // æ’å…¥åˆå§‹åŒ–åˆ—è¡¨
```

#### åˆ é™¤å…ƒç´ 
```c++
lst.pop_back();                 // åˆ é™¤å°¾éƒ¨
lst.pop_front();                // åˆ é™¤å¤´éƒ¨
lst.erase(it);                  // åˆ é™¤è¿­ä»£å™¨æŒ‡å‘çš„å…ƒç´ 
lst.erase(first, last);         // åˆ é™¤èŒƒå›´ [first, last)
lst.remove(42);                 // åˆ é™¤æ‰€æœ‰å€¼ä¸º42çš„å…ƒç´ 
lst.remove_if([](int x) {       // åˆ é™¤æ»¡è¶³æ¡ä»¶çš„å…ƒç´ 
    return x % 2 == 0; 
});
lst.clear();                    // æ¸…ç©ºæ‰€æœ‰å…ƒç´ 
```

### é“¾è¡¨æ“ä½œ

#### æ‹¼æ¥ï¼ˆspliceï¼‰ - listç‰¹æœ‰
```c++
list<int> lst1 = {1, 2, 3};
list<int> lst2 = {4, 5, 6};

lst1.splice(lst1.end(), lst2);          // ç§»åŠ¨æ•´ä¸ªlst2åˆ°lst1æœ«å°¾
lst1.splice(lst1.begin(), lst2, it);    // ç§»åŠ¨å•ä¸ªå…ƒç´ 
lst1.splice(pos, lst2, first, last);    // ç§»åŠ¨å…ƒç´ èŒƒå›´
```

#### æ’åºä¸å»é‡
```c++
lst.sort();                     // é»˜è®¤å‡åºæ’åº
lst.sort(greater<int>());       // é™åºæ’åº
lst.unique();                   // åˆ é™¤è¿ç»­é‡å¤å…ƒç´ 
lst.unique([](int a, int b) {   // è‡ªå®šä¹‰å»é‡æ¡ä»¶
    return abs(a - b) < 2;
});
```

#### åˆå¹¶ä¸åè½¬
```c++
lst1.merge(lst2);               // åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨
lst1.merge(lst2, greater<int>()); // æŒ‡å®šæ¯”è¾ƒå‡½æ•°
lst.reverse();                  // åè½¬é“¾è¡¨
```

### æŸ¥æ‰¾ä¸åˆ¤æ–­

```c++
// æŸ¥æ‰¾ï¼ˆéœ€è¦çº¿æ€§æœç´¢ï¼‰
auto it = find(lst.begin(), lst.end(), 42);

// ç»Ÿè®¡
int count = 0;
for (auto x : lst) {
    if (x > 10) count++;
}

// æ¡ä»¶åˆ¤æ–­
bool all_even = all_of(lst.begin(), lst.end(), [](int x) {
    return x % 2 == 0;
});
```

### è¿­ä»£å™¨æ“ä½œ

```c++
auto begin = lst.begin();       // æŒ‡å‘ç¬¬ä¸€ä¸ªå…ƒç´ 
auto end = lst.end();           // æŒ‡å‘æœ€åä¸€ä¸ªå…ƒç´ ä¹‹å
auto rbegin = lst.rbegin();     // åå‘è¿­ä»£å™¨
auto rend = lst.rend();

// C++11 åæ¨èä½¿ç”¨ auto
for (auto it = lst.begin(); it != lst.end(); ++it) {
    cout << *it << " ";
}

// èŒƒå›´forå¾ªç¯ï¼ˆæ¨èï¼‰
for (const auto& element : lst) {
    cout << element << " ";
}
```

### æ€§èƒ½ç‰¹ç‚¹

| æ“ä½œ | æ—¶é—´å¤æ‚åº¦ | è¯´æ˜ |
|------|------------|------|
| `push_back()` | O(1) | å°¾éƒ¨æ’å…¥ |
| `push_front()` | O(1) | å¤´éƒ¨æ’å…¥ |
| `insert()` | O(1) | å·²çŸ¥ä½ç½®æ’å…¥ |
| `erase()` | O(1) | å·²çŸ¥ä½ç½®åˆ é™¤ |
| `splice()` | O(1) | é“¾è¡¨é—´ç§»åŠ¨ |
| `size()` | O(1) | C++11èµ· |
| `sort()` | O(n log n) | é“¾è¡¨æ’åº |
| `find()` | O(n) | çº¿æ€§æŸ¥æ‰¾ |

### å®ç”¨æŠ€å·§

#### æŒ‰ä¸‹æ ‡æ“ä½œ
```c++
// è·å–ç¬¬nä¸ªå…ƒç´ çš„è¿­ä»£å™¨
auto get_iterator_at_index = [](list<int>& lst, int index) {
    auto it = lst.begin();
    advance(it, index);
    return it;
};

// æŒ‰ä¸‹æ ‡åˆ é™¤
void remove_at_index(list<int>& lst, int index) {
    if (index < 0 || index >= lst.size()) return;
    auto it = lst.begin();
    advance(it, index);
    lst.erase(it);
}
```

#### å®‰å…¨éå†å¹¶åˆ é™¤
```c++
// é”™è¯¯æ–¹å¼ï¼ˆè¿­ä»£å™¨å¤±æ•ˆï¼‰
// for (auto it = lst.begin(); it != lst.end(); ++it) {
//     if (*it % 2 == 0) {
//         lst.erase(it);  // é”™è¯¯ï¼itå¤±æ•ˆåç»§ç»­ä½¿ç”¨
//     }
// }

// æ­£ç¡®æ–¹å¼
for (auto it = lst.begin(); it != lst.end(); ) {
    if (*it % 2 == 0) {
        it = lst.erase(it);  // ä½¿ç”¨è¿”å›å€¼æ›´æ–°è¿­ä»£å™¨
    } else {
        ++it;
    }
}
```

#### è‡ªå®šä¹‰æ’åº
```c++
struct Person {
    string name;
    int age;
};

list<Person> people;
people.sort([](const Person& a, const Person& b) {
    return a.age < b.age;  // æŒ‰å¹´é¾„å‡åº
});
```

### é€‰æ‹© list çš„åœºæ™¯

**é€‚åˆä½¿ç”¨ listï¼š**
- âœ… é¢‘ç¹åœ¨ä»»æ„ä½ç½®æ’å…¥åˆ é™¤
- âœ… éœ€è¦ç¨³å®šçš„è¿­ä»£å™¨ï¼ˆæ’å…¥åˆ é™¤ä¸ä½¿å…¶ä»–è¿­ä»£å™¨å¤±æ•ˆï¼‰
- âœ… éœ€è¦ `splice` æ“ä½œ

**ä¸é€‚åˆä½¿ç”¨ listï¼š**
- âŒ éœ€è¦éšæœºè®¿é—®å…ƒç´ 
- âŒ å†…å­˜å—é™ï¼ˆæ¯ä¸ªå…ƒç´ æœ‰é¢å¤–æŒ‡é’ˆå¼€é”€ï¼‰
- âŒ ç¼“å­˜æ€§èƒ½é‡è¦ï¼ˆå†…å­˜ä¸è¿ç»­ï¼‰

### ç¤ºä¾‹æ€»ç»“

```c++
#include <iostream>
#include <list>
#include <algorithm>

int main() {
    // åˆ›å»ºå’Œåˆå§‹åŒ–
    list<int> lst = {1, 2, 3, 4, 5};
    
    // æ·»åŠ å…ƒç´ 
    lst.push_back(6);
    lst.push_front(0);
    
    // æ’å…¥å…ƒç´ 
    auto it = lst.begin();
    advance(it, 3);
    lst.insert(it, 99);
    
    // åˆ é™¤å…ƒç´ 
    lst.remove(3);           // åˆ é™¤æ‰€æœ‰3
    lst.pop_back();          // åˆ é™¤å°¾éƒ¨
    
    // æ’åºå’Œåè½¬
    lst.sort();
    lst.reverse();
    
    // éå†è¾“å‡º
    for (int x : lst) {
        cout << x << " ";
    }
    
    return 0;
}
```